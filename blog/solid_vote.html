<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Building the SolidVote Decentralized Voting Application</title>
    <link rel="stylesheet" href="../styles.css">
</head>

<body>
    <header>
        <h1>Jonathan Johnston's Blog</h1>
        <nav>
            <ul>
                <li><a href="../index.html">Home</a></li>
                <li><a href="../portfolio.html">Portfolio</a></li>
                <li><a href="../resume.html">Resume</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <article>
            <header>
                <h2>Building the SolidVote Decentralized Voting Application</h2>
                <p>By Jonathan Johnston</p>
                <p>Posted on April 20, 2023</p>
                <p>*This post was written with extensive help from GPT4, lets just say the notes in my lab book were...
                    overly concise.*</p>
            </header>
            <div class="summary">
                <p>I discuss creating SolidVote, a decentralized voting app on Ethereum. The journey involved smart
                    contracts, Truffle, Ganache, web3.js, Node.js, and Metamask integration, leading to a functional and
                    secure voting application.</p>
            </div>
            <div class="project-resources">
                <h3>
                    <a href="https://github.com/Shadfurman/SolidVote">SolidVote on GitHub</a>
                    or
                    <a href="https://shadfurman.github.io/">Try SolidVote Now!</a>
                </h3>
            </div>
            <section>
                <h3>Introduction</h3>
                <p>In this blog post, I will discuss my development journey of the SolidVote decentralized voting
                    application built on the Ethereum blockchain. I will cover the process from drafting the contract in
                    Remix to setting up the front-end using web3.js and eventually implementing Metamask for user
                    authentication. Throughout the post, I will also address some challenges faced and lessons learned
                    during the development process.</p>
            </section>
            <section>
                <h3>SolidVote Draft Contract</h3>
                <p>The SolidVote project began with me drafting a contract using the Remix IDE. Remix is an excellent
                    tool for quickly developing, testing, and debugging Solidity smart contracts.</p>
            </section>
            <section>
                <h3>Setting Up the Development Environment</h3>
                <p>To set up my local development environment, I installed Truffle and Ganache. Truffle is a development
                    framework for Ethereum, while Ganache is a personal blockchain for Ethereum development. I then
                    migrated the contract to Ganache, enabling me to test the contract locally.</p>
            </section>
            <section>
                <h3>Integrating Web3.js and Node.js</h3>
                <p> To interact with the Ethereum blockchain, I used the web3.js library, which is essential for
                    integrating smart contracts with a web front-end.</p>
            </section>
            <section>
                <h3>Dealing with Web3.js Challenges</h3>
                <p>During development, I encountered challenges related to including the web3.min.js file in the
                    project.
                    After much trial and error, I realized that including the file in the HTML file resolved the issue,
                    as the script tag would automatically include the necessary dependencies when running in the
                    browser.</p>
            </section>
            <section>
                <h3>Metamask Integration</h3>
                <p>I successfully integrated Metamask, a popular Ethereum wallet, into the application to enable user
                    authentication. Initially, the application used a hardcoded private key, but I replaced it with
                    Metamask to make it more secure and user-friendly. By doing so, I was able to extract the private
                    key directly from Metamask without the need for manual input.</p>
            </section>
            <section>
                <h3>Improving Functionality</h3>
                <p>Initially, the application allowed a user to create a ballot and immediately vote, with only one vote
                    per ballot.
                    I later extended the functionality to allow multiple users to set up and create ballots and enable
                    multiple people to link
                    to the created ballots and cast their votes. This was achieved by implementing functions like
                    createNewBallotApp, voteOnBallotApp, and submitVote.

                    Fetching ABI from JSON File

                    To optimize the development process, I decided to fetch the contract's ABI (Application Binary
                    Interface) from a JSON file
                    instead of manually copying and reformatting it each time the contract changed. I used the fetch
                    function to accomplish this
                    and struggled a bit with handling asynchronous promises. Eventually, I was able to disable the
                    "connectEthereumWalletButton"
                    until all promises were resolved.</p>
            </section>
            <section>
                <h3>Deploying onto the Sepolia Test Network</h3>
                <p>Deployment was fairly strait forward, but once it was on the network, half of the contract quit
                    working correctly.
                    After many hours of debugging I discovered my error. To call a contract function doesn't use any
                    gas, but I was using the
                    account number as an ID so I still needed send it. When I ran it locally, MetaMask would send the
                    account I was using as a default,
                    and that changed after deployment onto the network so the contract wasn't getting an account.
                </p>
            </section>
            <section>
                <h3>Conclusion</h3>
                <p>Though not quite over, with the end of this project in sight, developing the SolidVote decentralized
                    voting application was an exciting and challenging journey. Throughout the process, I learned
                    valuable lessons about Solidity, web3.js, and Metamask integration. As the application continues to
                    grow and evolve, I am optimistic about its potential to enable secure and transparent voting
                    processes on the Ethereum blockchain.</p>
            </section>
        </article>
    </main>
    <footer>
        <p>&copy; 2023 Jonathan Johnston. All rights reserved.</p>
    </footer>
</body>

</html>